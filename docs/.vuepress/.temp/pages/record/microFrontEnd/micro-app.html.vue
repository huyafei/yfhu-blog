<template><div><h1 id="micro-app" tabindex="-1"><a class="header-anchor" href="#micro-app" aria-hidden="true">#</a> micro-app</h1>
<div class="custom-container tip"><p class="custom-container-title">æç¤º</p>
<p>ä»¥ä¸‹æ“ä½œæµç¨‹æ˜¯ä»¥ vue2.x ä¸ºç¤ºä¾‹ï¼Œå…¶å®ƒè¯¦ç»†è¯·å‚è€ƒ <a href="https://micro-zoe.github.io/micro-app/docs.html#/" target="_blank" rel="noopener noreferrer">micro-app<ExternalLinkIcon/></a> å®˜æ–¹æ–‡æ¡£ã€‚<br>
<a href="https://github.com/huyafei/micro-app-demo" target="_blank" rel="noopener noreferrer">ç¤ºä¾‹æºç <ExternalLinkIcon/></a><br>
åœ¨ <code v-pre>micro-app</code> ä¸­ï¼Œåˆ†ä¸ºåŸºåº§å’Œå­åº”ç”¨ï¼Œå°±æ˜¯ <code v-pre>qiankun</code> ä¸­ä¸»åº”ç”¨å’Œå¾®åº”ç”¨çš„åŒºåˆ«ã€‚</p>
</div>
<h2 id="è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#è¯´æ˜" aria-hidden="true">#</a> è¯´æ˜</h2>
<p>æ–°å»ºä¸¤ä¸ªé¡¹ç›® vue2-main å’Œ vue2-child-histroyï¼Œåˆ†åˆ«ä½œä¸ºåŸºåº§å’Œå­åº”ç”¨ï¼Œä¸”è·¯ç”±æ¨¡å¼éƒ½æ˜¯ <code v-pre>history</code> æ¨¡å¼ã€‚</p>
<p>åŸºæœ¬ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="/static/images/microFrontEnd/micro-app_01.jpg" alt="åŸºæœ¬ç›®å½•ç»“æ„"></p>
<p><strong>å¤‡æ³¨ï¼š</strong><br>
å›¾ä¸­é¢å¤–çš„å¯ä»¥ä¸ç”¨ç®¡ï¼Œåªéœ€æ–°å»ºä¸¤ä¸ªé¡¹ç›® vue2-main å’Œ vue2-child-histroyï¼Œå…¶å®ƒæ˜¯é…åˆä½¿ç”¨ <code v-pre>npm-run-all</code>
æ’ä»¶ä½¿ç”¨çš„ï¼Œå¯å‚è€ƒæºç ç»“æ„ã€‚</p>
<h2 id="å¿«é€Ÿä¸Šæ‰‹" tabindex="-1"><a class="header-anchor" href="#å¿«é€Ÿä¸Šæ‰‹" aria-hidden="true">#</a> å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 id="åŸºåº§" tabindex="-1"><a class="header-anchor" href="#åŸºåº§" aria-hidden="true">#</a> åŸºåº§</h3>
<h4 id="_1-å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-å®‰è£…ä¾èµ–" aria-hidden="true">#</a> 1. å®‰è£…ä¾èµ–</h4>
<CodeGroup>
<CodeGroupItem title="yarn">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> @micro-zoe/micro-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></CodeGroupItem>
<CodeGroupItem title="npm">
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @micro-zoe/micro-app --save
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></CodeGroupItem>
</CodeGroup>
<h4 id="_2-åœ¨å…¥å£æ–‡ä»¶-main-js-å¼•å…¥" tabindex="-1"><a class="header-anchor" href="#_2-åœ¨å…¥å£æ–‡ä»¶-main-js-å¼•å…¥" aria-hidden="true">#</a> 2. åœ¨å…¥å£æ–‡ä»¶ <code v-pre>main.js</code> å¼•å…¥</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">'@micro-zoe/micro-app'</span>
microApp<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-æ–°å»º-micro-app-history-vue-é¡µé¢-å¹¶åˆ†é…ä¸€ä¸ªè·¯ç”±ç»™å­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-æ–°å»º-micro-app-history-vue-é¡µé¢-å¹¶åˆ†é…ä¸€ä¸ªè·¯ç”±ç»™å­åº”ç”¨" aria-hidden="true">#</a> 3. æ–°å»º <code v-pre>micro-app-history.vue</code> é¡µé¢ï¼Œå¹¶åˆ†é…ä¸€ä¸ªè·¯ç”±ç»™å­åº”ç”¨</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">"vue-router"</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"home"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "home" */</span> <span class="token string">"../views/home.vue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"/micro-app-history/*"</span><span class="token punctuation">,</span> <span class="token comment">// vue-router@4.x pathçš„å†™æ³•ä¸ºï¼š'/micro-app-history/:page*'</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"micro-app-history"</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token keyword">import</span><span class="token punctuation">(</span>
        <span class="token comment">/* webpackChunkName: "micro-app-history" */</span> <span class="token string">"../views/micro-app-history.vue"</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"history"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤‡æ³¨ï¼š</strong></p>
<ul>
<li>æ–°å»ºçš„é¡µé¢åå­—é¿å…ä¸ MicroApp ä¸€æ ·æœ€å¥½ä¸ä¸€æ ·ã€‚</li>
<li>åŸºåº§è·¯ç”±æ¨¡å¼ä¸º <code v-pre>history</code> æ¨¡å¼</li>
</ul>
<h4 id="_4-åœ¨-microapphistory-é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-åœ¨-microapphistory-é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨" aria-hidden="true">#</a> 4. åœ¨ <code v-pre>MicroAppHistory</code> é¡µé¢ä¸­åµŒå…¥å­åº”ç”¨</h4>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>å­åº”ç”¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--
        name(å¿…ä¼ )ï¼šåº”ç”¨åç§°
        url(å¿…ä¼ )ï¼šåº”ç”¨åœ°å€ï¼Œä¼šè¢«è‡ªåŠ¨è¡¥å…¨ä¸ºhttp://localhost:8083/index.html
        baseroute(å¯é€‰)ï¼šåŸºåº§åº”ç”¨åˆ†é…ç»™å­åº”ç”¨çš„åŸºç¡€è·¯ç”±ï¼Œå°±æ˜¯ä¸Šé¢çš„ `/my-page`
       --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue2-child-history<span class="token punctuation">"</span></span>
      <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8083/<span class="token punctuation">"</span></span>
      <span class="token attr-name">baseroute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/micro-app-history<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"MicroAppHistory"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å­åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å­åº”ç”¨" aria-hidden="true">#</a> å­åº”ç”¨</h3>
<h4 id="_1-åœ¨å­åº”ç”¨-src-ç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º-public-path-js-çš„æ–‡ä»¶-å¹¶åœ¨å…¥å£æ–‡ä»¶-main-js-ä¸­å¼•å…¥-public-path-js-å†…å®¹å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#_1-åœ¨å­åº”ç”¨-src-ç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º-public-path-js-çš„æ–‡ä»¶-å¹¶åœ¨å…¥å£æ–‡ä»¶-main-js-ä¸­å¼•å…¥-public-path-js-å†…å®¹å¦‚ä¸‹" aria-hidden="true">#</a> 1. åœ¨å­åº”ç”¨ <code v-pre>src</code> ç›®å½•ä¸‹åˆ›å»ºåç§°ä¸º <code v-pre>public-path.js</code> çš„æ–‡ä»¶ï¼Œå¹¶åœ¨å…¥å£æ–‡ä»¶ <code v-pre>main.js</code> ä¸­å¼•å…¥ï¼Œ<code v-pre>public-path.js</code> å†…å®¹å¦‚ä¸‹ï¼š</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// public-path.js</span>
<span class="token comment">// __MICRO_APP_ENVIRONMENT__å’Œ__MICRO_APP_PUBLIC_PATH__æ˜¯ç”±micro-appæ³¨å…¥çš„å…¨å±€å˜é‡</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>__MICRO_APP_ENVIRONMENT__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// eslint-disable-next-line</span>
  __webpack_public_path__ <span class="token operator">=</span> window<span class="token punctuation">.</span>__MICRO_APP_PUBLIC_PATH__
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>main.js</code> å¼•å…¥</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">'./public-path'</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">"./App.vue"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">"./router"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">"./store"</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-è®¾ç½®åŸºç¡€è·¯ç”±-å¦‚æœåŸºåº§åº”ç”¨æ˜¯historyè·¯ç”±-å­åº”ç”¨æ˜¯hashè·¯ç”±-è¿™ä¸€æ­¥å¯ä»¥çœç•¥" tabindex="-1"><a class="header-anchor" href="#_2-è®¾ç½®åŸºç¡€è·¯ç”±-å¦‚æœåŸºåº§åº”ç”¨æ˜¯historyè·¯ç”±-å­åº”ç”¨æ˜¯hashè·¯ç”±-è¿™ä¸€æ­¥å¯ä»¥çœç•¥" aria-hidden="true">#</a> 2. è®¾ç½®åŸºç¡€è·¯ç”±(å¦‚æœåŸºåº§åº”ç”¨æ˜¯historyè·¯ç”±ï¼Œå­åº”ç”¨æ˜¯hashè·¯ç”±ï¼Œè¿™ä¸€æ­¥å¯ä»¥çœç•¥)</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// ... å…¶å®ƒä»£ç </span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">"history"</span><span class="token punctuation">,</span>
  <span class="token comment">// ğŸ‘‡ è®¾ç½®åŸºç¡€è·¯ç”±ï¼Œå­åº”ç”¨å¯ä»¥é€šè¿‡window.__MICRO_APP_BASE_ROUTE__è·å–åŸºåº§ä¸‹å‘çš„baserouteï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®baserouteå±æ€§ï¼Œåˆ™æ­¤å€¼é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²</span>
  <span class="token literal-property property">base</span><span class="token operator">:</span> window<span class="token punctuation">.</span>__MICRO_APP_BASE_ROUTE__ <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ... å…¶å®ƒä»£ç </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-åœ¨-vue-config-config-js-ä¸­é…ç½®-webpack-dev-server-çš„-headers-ä¸­è®¾ç½®è·¨åŸŸæ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#_3-åœ¨-vue-config-config-js-ä¸­é…ç½®-webpack-dev-server-çš„-headers-ä¸­è®¾ç½®è·¨åŸŸæ”¯æŒ" aria-hidden="true">#</a> 3. åœ¨ <code v-pre>vue.config.config.js</code> ä¸­é…ç½® <code v-pre>webpack-dev-server</code> çš„ <code v-pre>headers</code> ä¸­è®¾ç½®è·¨åŸŸæ”¯æŒ</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@vue/cli-service"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8083</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">"Access-Control-Allow-Origin"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-ç›‘å¬å¸è½½-åœ¨-main-js-ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#_4-ç›‘å¬å¸è½½-åœ¨-main-js-ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç " aria-hidden="true">#</a> 4. ç›‘å¬å¸è½½ï¼Œåœ¨ <code v-pre>main.js</code> ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token comment">// ... å…¶å®ƒä»£ç </span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">h</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç›‘å¬å¸è½½æ“ä½œ</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"unmount"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•°æ®é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#æ•°æ®é€šä¿¡" aria-hidden="true">#</a> æ•°æ®é€šä¿¡</h2>
<h3 id="åŸºåº§å‘å­åº”ç”¨å‘é€æ•°æ®" tabindex="-1"><a class="header-anchor" href="#åŸºåº§å‘å­åº”ç”¨å‘é€æ•°æ®" aria-hidden="true">#</a> åŸºåº§å‘å­åº”ç”¨å‘é€æ•°æ®</h3>
<p>ä¸¤ç§æ–¹å¼ï¼š</p>
<h4 id="_1-é€šè¿‡-data-å±æ€§ä¼ é€’æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-é€šè¿‡-data-å±æ€§ä¼ é€’æ•°æ®" aria-hidden="true">#</a> 1. é€šè¿‡ <code v-pre>data</code> å±æ€§ä¼ é€’æ•°æ®</h4>
<div class="language-vue ext-vue line-numbers-mode"><pre v-pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>åŸºåº§-å†…éƒ¨å±•ç¤º<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--
        name(å¿…ä¼ )ï¼šåº”ç”¨åç§°
        url(å¿…ä¼ )ï¼šåº”ç”¨åœ°å€ï¼Œä¼šè¢«è‡ªåŠ¨è¡¥å…¨ä¸ºhttp://localhost:8083/index.html
        baseroute(å¯é€‰)ï¼šåŸºåº§åº”ç”¨åˆ†é…ç»™å­åº”ç”¨çš„åŸºç¡€è·¯ç”±ï¼Œå°±æ˜¯ä¸Šé¢çš„ `/my-page`
        data(å¯é€‰)ï¼šä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®
       --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>micro-app</span>
      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vue2-child-history<span class="token punctuation">"</span></span>
      <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8083/<span class="token punctuation">"</span></span>
      <span class="token attr-name">baseroute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/micro-app-history<span class="token punctuation">"</span></span>
      <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>microAppData<span class="token punctuation">"</span></span>
    <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>micro-app</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"MicroAppHistory"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">microAppData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"hello micro-app-history"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-é€šè¿‡-setdata-æ‰‹åŠ¨å‘é€æ•°æ®å±€" tabindex="-1"><a class="header-anchor" href="#_2-é€šè¿‡-setdata-æ‰‹åŠ¨å‘é€æ•°æ®å±€" aria-hidden="true">#</a> 2. é€šè¿‡ <code v-pre>setData</code> æ‰‹åŠ¨å‘é€æ•°æ®å±€</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">'@micro-zoe/micro-app'</span>

<span class="token comment">// å‘é€æ•°æ®ç»™å­åº”ç”¨ vue2-child-historyï¼ŒsetDataç¬¬äºŒä¸ªå‚æ•°åªæ¥å—å¯¹è±¡ç±»å‹</span>
microApp<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token string">'vue2-child-history'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">"hello micro-app-history"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤‡æ³¨ï¼š</strong><br>
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åº”ç”¨çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å‘é€çš„æ•°æ®</p>
<h3 id="å­åº”ç”¨è·å–æ¥è‡ªåŸºåº§æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å­åº”ç”¨è·å–æ¥è‡ªåŸºåº§æ•°æ®" aria-hidden="true">#</a> å­åº”ç”¨è·å–æ¥è‡ªåŸºåº§æ•°æ®</h3>
<p>ä¸¤ç§æ–¹å¼ï¼š</p>
<h4 id="_1-ç›´æ¥è·å–" tabindex="-1"><a class="header-anchor" href="#_1-ç›´æ¥è·å–" aria-hidden="true">#</a> 1. ç›´æ¥è·å–</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> window<span class="token punctuation">.</span>microApp<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¿”å›åŸºåº§ä¸‹å‘çš„dataæ•°æ®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-ç»‘å®šç›‘å¬å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_2-ç»‘å®šç›‘å¬å‡½æ•°" aria-hidden="true">#</a> 2. ç»‘å®šç›‘å¬å‡½æ•°</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">dataListener</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¥è‡ªåŸºåº§åº”ç”¨çš„æ•°æ®'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * ç»‘å®šç›‘å¬å‡½æ•°ï¼Œç›‘å¬å‡½æ•°åªæœ‰åœ¨æ•°æ®å˜åŒ–æ—¶æ‰ä¼šè§¦å‘
 * dataListener: ç»‘å®šå‡½æ•°
 * autoTrigger: åœ¨åˆæ¬¡ç»‘å®šç›‘å¬å‡½æ•°æ—¶å¦‚æœæœ‰ç¼“å­˜æ•°æ®ï¼Œæ˜¯å¦éœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œé»˜è®¤ä¸ºfalse
 * !!!é‡è¦è¯´æ˜: å› ä¸ºå­åº”ç”¨æ˜¯å¼‚æ­¥æ¸²æŸ“çš„ï¼Œè€ŒåŸºåº§å‘é€æ•°æ®æ˜¯åŒæ­¥çš„ï¼Œ
 * å¦‚æœåœ¨å­åº”ç”¨æ¸²æŸ“ç»“æŸå‰åŸºåº§åº”ç”¨å‘é€æ•°æ®ï¼Œåˆ™åœ¨ç»‘å®šç›‘å¬å‡½æ•°å‰æ•°æ®å·²ç»å‘é€ï¼Œåœ¨åˆå§‹åŒ–åä¸ä¼šè§¦å‘ç»‘å®šå‡½æ•°ï¼Œ
 * ä½†è¿™ä¸ªæ•°æ®ä¼šæ”¾å…¥ç¼“å­˜ä¸­ï¼Œæ­¤æ—¶å¯ä»¥è®¾ç½®autoTriggerä¸ºtrueä¸»åŠ¨è§¦å‘ä¸€æ¬¡ç›‘å¬å‡½æ•°æ¥è·å–æ•°æ®ã€‚
 */</span>
window<span class="token punctuation">.</span>microApp<span class="token punctuation">.</span><span class="token function">addDataListener</span><span class="token punctuation">(</span>dataListener<span class="token operator">:</span> Function<span class="token punctuation">,</span> autoTrigger<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">)</span>

<span class="token comment">// è§£ç»‘ç›‘å¬å‡½æ•°</span>
window<span class="token punctuation">.</span>microApp<span class="token punctuation">.</span><span class="token function">removeDataListener</span><span class="token punctuation">(</span>dataListener<span class="token operator">:</span> Function<span class="token punctuation">)</span>

<span class="token comment">// æ¸…ç©ºå½“å‰å­åº”ç”¨çš„æ‰€æœ‰ç»‘å®šå‡½æ•°(å…¨å±€æ•°æ®å‡½æ•°é™¤å¤–)</span>
window<span class="token punctuation">.</span>microApp<span class="token punctuation">.</span><span class="token function">clearDataListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤‡æ³¨ï¼š</strong></p>
<ul>
<li>ç»‘å®šç›‘å¬å‡½æ•°ï¼Œwindow.microApp.addDataListener(dataListener: Function, autoTrigger?: boolean)
<ul>
<li>dataListener: ç»‘å®šå‡½æ•°</li>
<li>autoTrigger: åœ¨åˆæ¬¡ç»‘å®šç›‘å¬å‡½æ•°æ—¶å¦‚æœæœ‰ç¼“å­˜æ•°æ®ï¼Œæ˜¯å¦éœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œé»˜è®¤ä¸ºfalse</li>
</ul>
</li>
<li>è§£ç»‘ç›‘å¬å‡½æ•°ï¼Œwindow.microApp.removeDataListener(dataListener: Function)
<ul>
<li>dataListener: ç»‘å®šå‡½æ•°</li>
</ul>
</li>
<li>æ¸…ç©ºå½“å‰å­åº”ç”¨çš„æ‰€æœ‰ç»‘å®šå‡½æ•°(å…¨å±€æ•°æ®å‡½æ•°é™¤å¤–)ï¼Œwindow.microApp.clearDataListener()</li>
</ul>
<p><img src="/static/images/microFrontEnd/micro-app_02.png" alt="ç»‘å®šæ•°æ®ç›‘å¬å‡½æ•°"></p>
<h3 id="å­åº”ç”¨å‘åŸºåº§å‘é€æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å­åº”ç”¨å‘åŸºåº§å‘é€æ•°æ®" aria-hidden="true">#</a> å­åº”ç”¨å‘åŸºåº§å‘é€æ•°æ®</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// dispatchåªæ¥å—å¯¹è±¡ä½œä¸ºå‚æ•°</span>
window<span class="token punctuation">.</span>microApp<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'å­åº”ç”¨å‘é€çš„æ•°æ®'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åŸºåº§è·å–å­åº”ç”¨æ•°æ®" tabindex="-1"><a class="header-anchor" href="#åŸºåº§è·å–å­åº”ç”¨æ•°æ®" aria-hidden="true">#</a> åŸºåº§è·å–å­åº”ç”¨æ•°æ®</h3>
<p>åŸºåº§åº”ç”¨è·å–æ¥è‡ªå­åº”ç”¨çš„æ•°æ®æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<h4 id="_1-ç›´æ¥è·å–æ•°æ®" tabindex="-1"><a class="header-anchor" href="#_1-ç›´æ¥è·å–æ•°æ®" aria-hidden="true">#</a> 1.ç›´æ¥è·å–æ•°æ®</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">'@micro-zoe/micro-app'</span>

<span class="token keyword">const</span> childData <span class="token operator">=</span> microApp<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>appName<span class="token punctuation">)</span> <span class="token comment">// è¿”å›å­åº”ç”¨çš„dataæ•°æ®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¤‡æ³¨ï¼š</strong><br>
appName: å­åº”ç”¨çš„åç§°</p>
<h4 id="_2-ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶-datachange" tabindex="-1"><a class="header-anchor" href="#_2-ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶-datachange" aria-hidden="true">#</a> 2. ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ (datachange)</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>micro<span class="token operator">-</span>app
    name<span class="token operator">=</span><span class="token string">'my-app'</span>
    url<span class="token operator">=</span><span class="token string">'xx'</span>
    <span class="token comment">// æ•°æ®åœ¨äº‹ä»¶å¯¹è±¡çš„detail.dataå­—æ®µä¸­ï¼Œå­åº”ç”¨æ¯æ¬¡å‘é€æ•°æ®éƒ½ä¼šè§¦å‘datachange</span>
    @datachange<span class="token operator">=</span><span class="token string">'handleDataChange'</span>
  <span class="token operator">/</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>

<span class="token operator">&lt;</span>script<span class="token operator">></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleDataChange</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¥è‡ªå­åº”ç”¨çš„æ•°æ®ï¼š'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-ç»‘å®šç›‘å¬å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_3-ç»‘å®šç›‘å¬å‡½æ•°" aria-hidden="true">#</a> 3. ç»‘å®šç›‘å¬å‡½æ•°</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> microApp <span class="token keyword">from</span> <span class="token string">'@micro-zoe/micro-app'</span>

<span class="token keyword">function</span> <span class="token function">dataListener</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¥è‡ªå­åº”ç”¨my-appçš„æ•°æ®'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * ç»‘å®šç›‘å¬å‡½æ•°
 * appName: åº”ç”¨åç§°
 * dataListener: ç»‘å®šå‡½æ•°
 * autoTrigger: åœ¨åˆæ¬¡ç»‘å®šç›‘å¬å‡½æ•°æ—¶å¦‚æœæœ‰ç¼“å­˜æ•°æ®ï¼Œæ˜¯å¦éœ€è¦ä¸»åŠ¨è§¦å‘ä¸€æ¬¡ï¼Œé»˜è®¤ä¸ºfalse
 */</span>
microApp<span class="token punctuation">.</span><span class="token function">addDataListener</span><span class="token punctuation">(</span>appName<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">dataListener</span><span class="token operator">:</span> Function<span class="token punctuation">,</span> autoTrigger<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">)</span>

<span class="token comment">// è§£ç»‘ç›‘å¬my-appå­åº”ç”¨çš„å‡½æ•°</span>
microApp<span class="token punctuation">.</span><span class="token function">removeDataListener</span><span class="token punctuation">(</span>appName<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">dataListener</span><span class="token operator">:</span> Function<span class="token punctuation">)</span>

<span class="token comment">// æ¸…ç©ºæ‰€æœ‰ç›‘å¬appNameå­åº”ç”¨çš„å‡½æ•°</span>
microApp<span class="token punctuation">.</span><span class="token function">clearDataListener</span><span class="token punctuation">(</span>appName<span class="token operator">:</span> string<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>
